<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Dentist - Learning Hub</title>
    <link rel="icon" type="image/png" href="images/dental-quest-logo.png">

    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.2/css/all.min.css" integrity="sha512-SnH5WK+bZxgPHs44uWIX+LLJAJ9/2PkPKZ5QiAj6Ta86w+fsb2TkcmfRyVX3pBnMFcV7oQPJkl9QevSCWr3W6A==" crossorigin="anonymous" referrerpolicy="no-referrer" />
    
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;600;700&display=swap" rel="stylesheet">

    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.16.9/dist/katex.min.css">

    <link rel="stylesheet" href="style.css">
    <!-- ❌ تم حذف رابط MindElixir CSS من هنا -->
    <style>
        /* --- [إضافة جديدة] أنماط قسم استعراض الميزات --- */
        #explore-section {
            padding: 80px 40px;
            background-color: var(--card-bg); /* لون مختلف قليلاً للتمييز */
            transition: background-color 0.3s ease;
        }
        .explore-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
            gap: 40px;
            max-width: 1200px;
            margin: 0 auto;
        }
        .explore-feature-card {
            text-align: center;
        }
        .explore-feature-card .icon-large {
            font-size: 3rem;
            color: var(--primary-btn-bg);
            margin-bottom: 20px;
        }
        .explore-feature-card h3 {
            font-size: 1.5rem;
            margin-bottom: 10px;
            color: var(--choose-subject-text);
        }
        .explore-feature-card p {
            font-size: 1rem;
            color: var(--text-color);
            line-height: 1.6;
        }
        .section-title {
            text-align: center;
            font-size: 2.8rem;
            font-weight: 700;
            margin-bottom: 60px;
            color: var(--choose-subject-text);
        }

        /* --- [إضافة جديدة] أنماط النافذة المنبثقة (Modal) --- */
        .modal-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.6);
            display: flex;
            justify-content: center;
            align-items: center;
            z-index: 5000;
            opacity: 0;
            visibility: hidden;
            transition: opacity 0.3s ease, visibility 0.3s ease;
            backdrop-filter: blur(5px);
        }
        .modal-overlay.active {
            opacity: 1;
            visibility: visible;
        }
        .modal-box {
            background-color: var(--card-bg);
            color: var(--text-color);
            padding: 40px;
            border-radius: 12px;
            text-align: center;
            max-width: 500px;
            width: 90%;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.2);
            transform: scale(0.9);
            transition: all 0.3s ease;
        }
        .modal-overlay.active .modal-box {
            transform: scale(1);
        }
        .modal-box h3 {
            font-size: 1.8rem;
            margin-bottom: 15px;
            color: var(--choose-subject-text);
        }
        .modal-box p {
            font-size: 1.1rem;
            margin-bottom: 30px;
            line-height: 1.6;
        }
        .modal-box .fas {
            font-size: 3rem;
            color: var(--primary-btn-bg);
            margin-bottom: 20px;
        }
        .subject-button img.custom-icon, .carousel-item img.custom-icon {
            width: 32px;
            height: 32px;
            object-fit: contain;
            transition: transform 0.2s ease, filter 0.2s ease;
        }
        .subject-button:hover img.custom-icon, .carousel-item:hover img.custom-icon {
            transform: scale(1.1);
        }

        /* أنماط إضافية للبطاقات الجديدة */
        #welcome-card-container {
            display: none;
            width: 100%;
            max-width: 500px;
        }

        .stats-card {
            display: none;
            width: 100%;
            max-width: 500px;
        }
        #report-modal textarea {
        width: 100%;
        min-height: 120px;
        padding: 10px;
        border-radius: 8px;
        border: 1px solid var(--input-border);
        font-size: 1rem;
        margin-bottom: 20px;
    }
    .modal-actions {
        display: flex;
        justify-content: flex-end;
        gap: 10px;
    }
    </style>
</head>

<body>

    <div id="tsparticles"></div>

    <header class="main-header">
        <div class="header-left">
            <i class="fas fa-graduation-cap header-cap-icon"></i>
        </div>
        <button class="mobile-nav-toggle" aria-label="Toggle navigation" aria-expanded="false">
            <i class="fas fa-bars"></i>
        </button>
        <nav class="main-nav">
            <ul>
                <li><a href="#home-page">Home</a></li>
                <li><a href="#dashboard-page">My Dashboard</a></li>
                <li><a href="#subjects-page" data-page-type="summaries">Summaries</a></li>
                <li><a href="#subjects-page" data-page-type="quizzes">Quizzes</a></li>
                <li><a href="#subjects-page" data-page-type="lessons">Lessons</a></li>
                <li><a href="#flashcards-page">My Flashcards</a></li>
            </ul>
        </nav>
        <div class="header-right-controls">
            <button class="theme-toggle-btn" aria-label="Toggle dark/light mode">
                <i class="fas fa-sun"></i>
            </button>
            <div class="user-profile-widget">
                <span id="user-xp-display" class="xp-display">0 XP</span>
                <div class="header-right-logo">
                    <img src="images/ai-logo-circle.png" alt="AI Chat Logo" class="ai-header-logo">
                </div>
            </div>
            </div>
    </header>

    <main>
        <section class="page-section active" id="home-page">
            <div class="hero-section">
                <div class="hero-content scroll-reveal-element">
                    <div class="typing-headline-container">
                        <h1 id="typing-headline" data-text="Dentist"></h1>
                    </div>
                    <p class="tagline">Your comprehensive learning hub for dentistry students</p>
                    <div class="action-buttons">
                        <button class="btn primary-btn" id="start-learning-btn">Start Learning</button>
                        <a href="#explore-section" class="btn secondary-btn" id="explore-content-btn">Explore Content</a>
                    </div>
                    <div class="social-media">
                        <p>Follow us on social media</p>
                        <div class="social-icons">
                            <a href="#" target="_blank" aria-label="Instagram"><i class="fab fa-instagram instagram-icon"></i></a>
                            <a href="#" target="_blank" aria-label="YouTube"><i class="fab fa-youtube youtube-icon"></i></a>
                        </div>
                    </div>
                </div>
                
                <div class="hero-image scroll-reveal-element">
                    <div id="welcome-card-container" class="welcome-card-wrapper">
                        <div class="welcome-card">
                            <div class="welcome-card-glow"></div>

                            <div class="welcome-card-content">
                                <div class="welcome-card-text">
                                    <h3>Welcome to <span class="highlight">Dentist</span></h3>
                                    <p>Start your learning journey and take your first quiz now.</p>
                                    
                                    <div class="progress-container">
                                        <div class="progress-labels">
                                            <span>Progress</span>
                                            <span>0%</span>
                                        </div>
                                        <div class="progress-bar-background">
                                            <div class="progress-bar-foreground"></div>
                                        </div>
                                    </div>

                                    <button id="welcome-start-quiz-btn" class="welcome-card-button">
                                        Start Your First Quiz
                                        <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" viewBox="0 0 16 16">
                                            <path fill-rule="evenodd" d="M4 8a.5.5 0 0 1 .5-.5h5.793L8.146 5.354a.5.5 0 1 1 .708-.708l3 3a.5.5 0 0 1 0 .708l-3 3a.5.5 0 0 1-.708-.708L10.293 8.5H4.5A.5.5 0 0 1 4 8z"/>
                                        </svg>
                                    </button>
                                </div>

                                <div class="welcome-card-illustration">
                                    <img src="images/3d-books-cap.png" alt="3D illustration of books and a graduation cap">
                                </div>
                            </div>
                        </div>
                    </div>

                    <div id="stats-dashboard" class="stats-dashboard glassmorphism-card">
                        <div class="stats-header">
                            <h2>Dentist</h2>
                            <p>Keep track of your journey, one step at a time</p>
                        </div>
                        <div class="last-lesson-card">
                            <p class="card-label">Last Lesson</p>
                            <h3 id="stats-last-lesson-title">Anatomy</h3>
                            <span id="stats-last-lesson-module">Module 2</span>
                        </div>
                        <div class="stats-grid">
                            <div class="stat-box">
                                <p class="card-label">Quizzes</p>
                                <p class="stat-main-number" id="stats-quizzes-correct">5</p>
                                <p class="stat-sub-text">Correct</p>
                                <div class="stat-footer">
                                    <i class="fas fa-clock"></i>
                                    <span id="stats-quizzes-time">8h 15m</span>
                                </div>
                            </div>
                            <div class="stat-box">
                                <p class="card-label">Incorrect</p>
                                <p class="stat-main-number incorrect-color" id="stats-quizzes-incorrect">2</p>
                                <p class="stat-sub-text">Incorrect</p>
                                 <div class="stat-footer">
                                    <i class="fas fa-palette"></i>
                                </div>
                            </div>
                            <div class="stat-box achievement-box" id="achievement-badge-container">
                                <img src="images/badge-gold.png" alt="Gold Badge" id="achievement-badge-img">
                                <p id="achievement-badge-text">Congratulations!</p>
                            </div>
                        </div>
                    </div>
                </div>

            </div>

            <section id="explore-section">
                <h2 class="section-title glowing-text">Discover Your Tools for Success</h2>
                <div class="explore-grid">
                    <div class="explore-feature-card scroll-reveal-element">
                        <i class="fas fa-check-double icon-large"></i>
                        <h3>Interactive Quizzes</h3>
                        <p>Test your knowledge with thousands of corrected questions, track your performance, and review your mistakes to learn faster.</p>
                    </div>
                    <div class="explore-feature-card scroll-reveal-element" style="transition-delay: 0.2s;">
                        <i class="fas fa-book-reader icon-large"></i>
                        <h3>Organized Summaries</h3>
                        <p>Access well-structured and concise summaries for all subjects, making revision sessions more effective and less time-consuming.</p>
                    </div>
                    <div class="explore-feature-card scroll-reveal-element" style="transition-delay: 0.4s;">
                        <i class="fas fa-robot icon-large"></i>
                        <h3>AI-Powered Hub</h3>
                        <p>Generate personalized quizzes, summaries, or flashcards from any PDF file. Your personal AI tutor is here to help you study smarter.</p>
                    </div>
                </div>
            </section>

            <div class="feature-cards-section glassmorphism-card">
                <div class="feature-cards-container">
                    <div class="card glassmorphism-card scroll-reveal-element" id="video-lessons-card">
                        <i class="fas fa-play icon-large"></i>
                        <h3>Video Lessons</h3>
                    </div>
                    <div class="card glassmorphism-card scroll-reveal-element" id="summaries-card">
                        <i class="fas fa-book icon-large"></i>
                        <h3>Summaries</h3>
                    </div>
                    <div class="card glassmorphism-card scroll-reveal-element" id="quizzes-card">
                        <i class="fas fa-question icon-large"></i>
                        <h3>Quizzes</h3>
                    </div>
                    <div class="card glassmorphism-card scroll-reveal-element" id="articles-card">
                        <i class="fas fa-file-alt icon-large"></i>
                        <h3>Articles</h3>
                    </div>
                </div>
            </div>
        </section>

        <section class="page-section" id="dashboard-page">
            <div class="dashboard-container">
                <h2 class="page-title glowing-text">My Performance Dashboard</h2>
                
                <div class="dashboard-grid">
                    <div class="stat-card glassmorphism-card">
                        <i class="fas fa-star stat-icon"></i>
                        <span class="stat-value" id="dashboard-total-xp">0</span>
                        <span class="stat-label">Total Experience Points</span>
                    </div>
                    <div class="stat-card glassmorphism-card">
                        <i class="fas fa-trophy stat-icon"></i>
                        <span class="stat-value" id="dashboard-badge-count">0</span>
                        <span class="stat-label">Badges Unlocked</span>
                    </div>
                    <div class="stat-card glassmorphism-card">
                        <i class="fas fa-graduation-cap stat-icon"></i>
                        <span class="stat-value" id="dashboard-quiz-count">0</span>
                        <span class="stat-label">Quizzes Completed</span>
                    </div>

                    <div class="chart-card glassmorphism-card">
                        <h3>Performance by Subject</h3>
                        <div class="chart-container">
                            <canvas id="performance-chart"></canvas>
                        </div>
                    </div>

                   <div class="recent-activity-card glassmorphism-card">
                        <h3>Recent Activity</h3>
                        <ul id="recent-quizzes-list">
                            <li>Loading recent activities...</li>
                        </ul>
                    </div>

                    <div class="saved-quizzes-card glassmorphism-card">
                        <h3>My Saved Quizzes</h3>
                        <div id="saved-quizzes-list" class="saved-quizzes-container">
                            <p>Loading your saved quizzes...</p>
                        </div>
                    </div>
                    </div> </div>
        </section>
                </div>
            </div>
        </section>

        <section class="page-section" id="year-selection-page">
            <div class="year-selection-container glassmorphism-card scroll-reveal-element">
                <h2>Choose Your Study Year</h2>
                <p>Please select your current study year to continue.</p>
                <div class="year-buttons-grid">
                    <button class="btn primary-btn year-select-btn" data-year="1">1st Year Dental</button>
                    <button class="btn primary-btn year-select-btn" data-year="2">2nd Year Dental</button>
                    <button class="btn primary-btn year-select-btn" data-year="3">3rd Year Dental</button>
                    <button class="btn primary-btn year-select-btn" data-year="4">4th Year Dental</button>
                    <button class="btn primary-btn year-select-btn" data-year="5">5th Year Dental</button> 
                </div>
                <button class="btn secondary-btn" id="back-to-home-from-year">Back to Home</button>
            </div>
        </section>

        <section class="page-section" id="activation-page">
            <div class="activation-container glassmorphism-card scroll-reveal-element">
                <h2>Activate Your Account</h2>
                <p>To activate your account and gain full access, please contact us via Telegram for payment.</p>
                <div class="telegram-contact">
                    <a href="https://t.me/AYMENBEN17" target="_blank" class="telegram-btn">
                        <i class="fab fa-telegram-plane"></i> Contact us on Telegram
                    </a>
                </div>
                <div class="pricing-info">
                    <p class="price-heading">Pricing for Full Access:</p>
                    <div class="pricing-details"></div>
                </div>
                <button class="btn primary-btn" id="confirm-activation-btn">Confirm Activation (Simulated)</button>
                <p class="activation-status-message" id="activation-status"></p>
                <button class="btn secondary-btn" id="back-to-year-select">Choose a different year</button>
            </div>
        </section>

        <section class="page-section" id="subjects-page">
            <div class="subjects-container">
                <h2 class="choose-subject-text scroll-reveal-element glowing-text">
                    <span>choose</span>
                    <br>
                    <span>a Subject</span>
                </h2>
                
                <div class="carousel-scene">
                    <div class="carousel-container" id="subjects-carousel">
                        </div>
                </div>

                <div class="carousel-controls">
                    <button id="carousel-prev" class="carousel-arrow"><i class="fas fa-chevron-up"></i></button>
                    <button id="carousel-next" class="carousel-arrow"><i class="fas fa-chevron-down"></i></button>
                </div>
                
                <div class="heart-bubble glassmorphism-card scroll-reveal-element" style="transition-delay: 0.9s;">
                    <i class="fas fa-heart"></i>
                </div>
            </div>
        </section>

        <section class="page-section" id="summaries-page">
            <h2 class="page-title">Summaries Content for Year <span id="current-summary-year"></span></h2>
            <p>This is where you would display summaries related to subjects.</p>
            <p>You are logged in and activated!</p>
        </section>
        <section class="page-section" id="quizzes-page">
            <h2 class="page-title">Quizzes Content for Year <span id="current-quiz-year"></span></h2>
            <p>This is where you would display quizzes related to subjects.</p>
            <p>You are logged in and activated!</p>
        </section>
        <section class="page-section" id="lessons-page">
            <h2 class="page-title">Lessons Content for Year <span id="current-lesson-year"></span></h2>
            <p>This is where you would display lessons related to subjects.</p>
            <p>You are logged in and activated!</p>
        </section>
        
        <section class="page-section" id="content-display-page">
            <div class="content-display-container glassmorphism-card scroll-reveal-element">
                <h2 id="content-title" class="page-title glowing-text">Content Title Here</h2>
                <div id="content-list" class="content-list-container"></div>
                <button class="btn secondary-btn" id="back-to-subjects-btn">Back to Subjects</button>
            </div>
        </section>

        <section class="page-section" id="lessons-display-page">
            <div class="lessons-display-container glassmorphism-card scroll-reveal-element">
                
                <button class="btn secondary-btn back-button" id="back-to-subjects-from-lessons-btn">
                    <i class="fas fa-arrow-left"></i> Back to Subjects
                </button>
    
                <div class="lessons-header">
                    <img id="lesson-subject-icon" src="images/ai-logo-circle.png" alt="Subject Icon" class="custom-icon">
                    <h2 id="lesson-subject-title" class="page-title glowing-text">Subject Lessons</h2>
                </div>
                
                <div id="lessons-list-container" class="lessons-list">
                    </div>
            </div>
        </section>

        <section class="page-section" id="quiz-taking-page">
            <div class="quiz-container-pro">
                <nav class="quiz-question-list-pro">
                    <h4>Questions</h4>
                    <div id="quiz-question-numbers-pro">
                        </div>
                </nav>

                <main class="quiz-main-area-pro">

                    <header class="quiz-header-pro">
                        <div id="quiz-breadcrumbs-pro">
                            <span id="quiz-subject-name-pro">Subject</span>
                            <i class="fas fa-chevron-right"></i>
                            <span id="quiz-lesson-name-pro">Quiz Title</span>
                        </div>
                        
                        <div style="display: flex; align-items: center; gap: 15px;">
                            <button id="report-question-btn" class="btn-translate" title="Report an issue with this question">
                                <i class="fas fa-flag"></i>
                            </button>
                            <div class="quiz-timer-pro">
                                <i class="fas fa-clock"></i>
                                <span id="quiz-timer-display-pro">01:30</span>
                            </div>
                            <button id="toggle-quiz-timer-btn" class="btn-translate" title="Toggle Question Timer" style="font-size: 1rem; padding: 6px 10px;">
                                <i class="fas fa-power-off"></i>
                            </button>
                        </div>
                    </header>

                    <div class="quiz-question-area-pro">
                        <p id="quiz-progress-pro">Question 1 of 15</p>
                        <h2 id="quiz-question-text-pro">The question text will appear here. Please wait...</h2>
                        <div id="quiz-options-container-pro">
                            </div>
                        <div class="quiz-explanation-pro" id="quiz-explanation-container-pro" style="display: none;">
                            <h4><i class="fas fa-lightbulb"></i> Explanation</h4>
                            <p id="quiz-explanation-text-pro"></p>
                        </div>
                    </div>


                    <footer class="quiz-footer-pro">
                        <button class="quiz-nav-btn-pro" id="quiz-prev-btn-pro" title="Previous Question"><i class="fas fa-arrow-left"></i></button>
                        
                        <div class="quiz-stats-pro">
                            <div>Correct: <span id="quiz-correct-count-pro">0</span></div>
                            <div>Incorrect: <span id="quiz-incorrect-count-pro">0</span></div>
                            <div>Score: <strong id="quiz-score-pro">0.00 / 20</strong></div>
                        </div>

                        <div style="display: flex; gap: 10px;">
                            <button class="quiz-nav-btn-pro primary" id="quiz-action-btn-pro">Check Answer</button>
                            <button class="quiz-nav-btn-pro" id="quiz-next-btn-pro" style="display: none;" title="Next Question"><i class="fas fa-arrow-right"></i></button>
                        </div>
                    </footer>

                </main>
            </div>
        </section>

        <section class="page-section" id="quiz-summary-page">
            <div class="quiz-summary-container glassmorphism-card scroll-reveal-element">
               <div class="summary-actions">
                    <button class="btn primary-btn" id="save-quiz-btn">
                        <i class="fas fa-save"></i> Save this Quiz
                    </button>
                </div> 
                <div class="summary-header">
                    <img src="images/badge-gold.png" alt="Achievement Badge" id="summary-badge-img">
                    <h2 class="page-title glowing-text" id="summary-title">Quiz Results</h2>
                    <p id="summary-subtitle">Here's a breakdown of your performance.</p>
                </div>

                <div class="summary-metrics-grid">
                    <div class="metric-box">
                        <span class="metric-value" id="summary-score">0.00 / 20</span>
                        <span class="metric-label">Final Score</span>
                    </div>
                    <div class="metric-box">
                        <span class="metric-value" id="summary-correct-answers">0 / 0</span>
                        <span class="metric-label">Correct Answers</span>
                    </div>
                    <div class="metric-box">
                        <span class="metric-value" id="summary-time-taken">0m 0s</span>
                        <span class="metric-label">Time Taken</span>
                    </div>
                </div>

                <div class="summary-actions">
                    <button class="btn primary-btn" id="export-summary-pdf-btn">
                        <i class="fas fa-file-pdf"></i> Export to PDF
                    </button>
                    <button class="btn secondary-btn" id="retry-quiz-btn">
                        <i class="fas fa-redo-alt"></i> Retry Quiz
                    </button>
                </div>

                <div class="summary-review-section">
                    <h3 class="review-title">Review Your Mistakes</h3>
                    <div id="incorrect-questions-summary">
                        </div>
                </div>
            
                <div class="summary-review-section" style="margin-top: 30px;">
                    <h3 class="review-title">Review Correct Answers</h3>
                    <div id="correct-questions-summary">
                        </div>
                </div>
                <button class="btn secondary-btn" id="back-to-subjects-from-summary-btn" style="margin-top: 30px;">
                    <i class="fas fa-arrow-left"></i> Back to Subjects
                </button>

            </div>
        </section>

        <section class="page-section" id="flashcards-page">
            <div class="flashcards-container">
                <h2 class="page-title glowing-text">My Flashcards</h2>
                <p class="page-subtitle">Select a subject to start reviewing your saved cards.</p>
        
                <div id="flashcards-content" class="flashcards-content-grid">
                    <p>Loading your flashcard collections...</p>
                </div>
        
                <div id="flashcard-viewer" class="flashcard-viewer-hidden">
                    <div class="flashcard-viewer-header">
                        <button id="back-to-collections-btn" class="btn secondary-btn"><i class="fas fa-arrow-left"></i> Back to Collections</button>
                        <h3 id="flashcard-viewer-title"></h3>
                        <div id="flashcard-progress">1 / 10</div>
                    </div>
                    <div id="flashcard-card-container">
                        <div class="flashcard">
                            <div class="flashcard-inner">
                                <div class="flashcard-front">
                                    <p id="flashcard-question"></p>
                                </div>
                                <div class="flashcard-back">
                                    <p id="flashcard-answer"></p>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="flashcard-viewer-controls">
    <button id="prev-flashcard-btn" class="btn secondary-btn"><i class="fas fa-chevron-left"></i> Prev</button>
    <button id="next-flashcard-btn" class="btn primary-btn">Next <i class="fas fa-chevron-right"></i></button>
</div>
<div id="ai-flashcard-rating-controls" class="flashcard-rating-controls" style="display: none;">
    <p>How well did you remember this?</p>
    <button class="btn rating-btn rating-hard" data-rating="hard" data-interval="1">
        <i class="fas fa-brain"></i> Hard (Review in 1 day)
    </button>
    <button class="btn rating-btn rating-medium" data-rating="medium" data-interval="3">
        <i class="fas fa-question-circle"></i> Unsure (Review in 3 days)
    </button>
    <button class="btn rating-btn rating-easy" data-rating="easy">
        <i class="fas fa-check-circle"></i> Easy (Don't save)
    </button>
</div>

<div id="ai-flashcard-rating-controls" class="flashcard-rating-controls" style="display: none;">
    <p>How well did you remember this?</p>
    <button class="btn rating-btn rating-hard" data-rating="hard" data-interval="1">
        <i class="fas fa-brain"></i> Hard (Review in 1 day)
    </button>
    <button class="btn rating-btn rating-medium" data-rating="medium" data-interval="3">
        <i class="fas fa-question-circle"></i> Unsure (Review in 3 days)
    </button>
    <button class="btn rating-btn rating-easy" data-rating="easy">
        <i class="fas fa-check-circle"></i> Easy (Don't save)
    </button>
</div>
                </div>
            </div>
        </section>
        <section class="page-section" id="pdfs-display-page">
    <div class="content-display-container glassmorphism-card scroll-reveal-element">
        <h2 id="pdfs-lesson-title" class="page-title glowing-text">PDFs for Lesson</h2>
        <div id="pdfs-list" class="content-list-container"></div>
        <button class="btn secondary-btn" id="back-to-lessons-btn">Back to Lessons</button>
    </div>
</section>

        <div class="modal-overlay" id="explore-modal">
            <div class="modal-box explore-box">
                <button class="close-modal-btn" id="close-explore-modal-btn" aria-label="Close">&times;</button>
                <i class="fas fa-rocket"></i>
                <h2>Your Path to Academic Excellence</h2>
                <p class="modal-subtitle">
                    We are here to support your ambition. We provide you with all the essential resources, from organized lessons and concise summaries to smart quizzes and advanced AI features, all designed to ensure your academic distinction.
                </p>
            </div>
        </div>
    </main>

    <div class="modal-overlay" id="articles-modal">
        <div class="modal-box">
            <i class="fas fa-users"></i>
            <h3>A Message From Our Team</h3>
            <p>This platform was built with passion by dentistry students, just like you, to serve their colleagues. Every feature and summary is the result of student effort. We always welcome your ideas and suggestions to make this place better for everyone.</p>
            <button class="btn primary-btn" id="close-articles-modal-btn">That's Awesome!</button>
        </div>
    </div>
    
    <div class="ai-hub-modal-overlay" id="aiHubModalOverlay" style="display: none;">
        <div class="ai-hub-modal">
            <button class="close-hub-btn" id="closeHubBtn">&times;</button>
            <h3>AI Assistant Toolkit</h3>
            <p>Choose a smart tool to help you with your studies.</p>
            <div class="ai-options-grid">
                <div class="ai-option-card" data-task="chat">
                    <i class="fas fa-comments"></i>
                    <h4>Smart Chat</h4>
                    <span>Ask any question</span>
                </div>
                <div class="ai-option-card" data-task="quiz">
                    <i class="fas fa-vial"></i>
                    <h4>Generate Quiz</h4>
                    <span>From any PDF</span>
                </div>
                <div class="ai-option-card" data-task="flashcards">
                    <i class="fas fa-layer-group"></i>
                    <h4>Create Flashcards</h4>
                    <span>From any PDF</span>
                </div>
                <div class="ai-option-card" data-task="summary">
                    <i class="fas fa-file-pdf"></i>
                    <h4>Summarize PDF</h4>
                    <span>Get key points</span>
                </div>
            </div>
        </div>
    </div>
    <div class="ai-hub-modal-overlay" id="aiProcessorModalOverlay" style="display: none;">
        <div class="ai-hub-modal">
            <button class="close-hub-btn" id="closeProcessorBtn">&times;</button>
            <h3 id="processorTitle">Upload your file</h3>
            <form id="aiFileForm">
    <p>Please upload the PDF file you want to process.</p>
    <input type="file" id="aiPdfInput" accept=".pdf" required>

    <div id="quiz-options-container" style="display: none; width: 100%; max-width: 300px; margin-top: 20px; text-align: left;">
        <label for="ai-quiz-count" style="display: block; margin-bottom: 5px; font-weight: 500;">Number of Questions:</label>
        <select id="ai-quiz-count" class="btn secondary-btn" style="width: 100%;">
            <option value="10" selected>10</option>
            <option value="15">15</option>
            <option value="20">20</option>
        </select>
    </div>

    <div id="flashcard-options-container" style="display: none; width: 100%; max-width: 300px; margin-top: 20px; text-align: left; display: flex; flex-direction: column; gap: 15px;">
        <div>
            <label for="ai-flashcard-count" style="display: block; margin-bottom: 5px; font-weight: 500;">Number of Quantity:</label>
            <select id="ai-flashcard-count" class="btn secondary-btn" style="width: 100%;">
                <option value="10" selected>10</option>
                <option value="15">15</option>
                <option value="20">20</option>
                <option value="25">25</option>
            </select>
        </div>
        <div>
            <label for="ai-generation-language" style="display: block; margin-bottom: 5px; font-weight: 500;">Language:</label>
            <select id="ai-generation-language" class="btn secondary-btn" style="width: 100%;">
                <option value="the same language as the document" selected>Same as document</option>
                <option value="English">English</option>
                <option value="French">French</option>
            </select>
        </div>
    </div>
    
    <button type="submit" class="btn primary-btn" id="aiProcessBtn" style="margin-top: 25px;">Start Generation</button>
</form>
            <div id="aiLoadingIndicator" style="display: none;">
                <p>AI is working, this might take a moment...</p>
                </div>
        </div>
    </div>
    <button class="ai-chat-btn" aria-label="Open AI Chat">
        <i class="fas fa-robot"></i>
    </button>
    <button id="pomodoro-toggle-btn" class="pomodoro-fab-btn" aria-label="Open Pomodoro Timer">
        <i class="fas fa-clock"></i>
    </button>

    <div class="ai-chat-modal" id="aiChatModal">
        <div class="ai-chat-box glassmorphism-card" id="aiChatBox">
            
            <div class="chat-header" id="chatHeader">
                <span>Dentist AI 👨‍🏫</span>
                <div id="chat-controls">
                    <button id="export-pdf-btn" title="Export Chat to PDF"><i class="fas fa-file-pdf"></i></button>
                </div>
                <button class="close-chat-btn" aria-label="Close Chat">
                    <i class="fas fa-times"></i>
                </button>
            </div>
            <div id="pinned-message-bar">
                <p id="pinned-message-text"></p>
                <button id="unpin-btn" title="Unpin Message">×</button>
            </div>

            <div class="chat-body" id="chat-messages">
                <div class="message-wrapper ai-message-wrapper">
                    <p class="ai-message">Hello! How can I assist you today?</p>
                </div>
            </div>
            
            <div class="chat-input">
                <div class="chat-actions-container">
                    <div class="upload-options" id="upload-options">
                        <button class="upload-option-btn" id="upload-pdf-btn" title="Upload PDF"><i class="fas fa-file-pdf"></i></button>
                        <button class="upload-option-btn" id="upload-image-btn" title="Upload Image"><i class="fas fa-image"></i></button>
                        <button class="upload-option-btn" id="upload-audio-btn" title="Upload Audio"><i class="fas fa-microphone"></i></button>
                    </div>
                    <button class="chat-plus-btn" id="chat-plus-btn" title="Attach File">
                        <i class="fas fa-plus"></i>
                    </button>
                </div>

                <input type="file" id="pdf-file-input" accept=".pdf" style="display: none;">
                <input type="file" id="image-file-input" accept="image/*" style="display: none;">
                <input type="file" id="audio-file-input" accept="audio/*" style="display: none;">

                <input id="user-chat-input" type="text" placeholder="Post your question or message here..." aria-label="Chat input" autocomplete="off">
                
                <button id="send-chat-button"><i class="fas fa-paper-plane"></i></button>
            </div>
            
            <div class="resize-handle" id="resizeHandle"></div>
        </div>
    </div>

    <div id="badge-popup-overlay" class="badge-overlay">
        <div class="badge-popup-content">
            <img id="badge-popup-img" src="images/badge-gold.png" alt="New Badge">
            <h2 id="badge-popup-name">New Badge Unlocked!</h2>
            <p id="badge-popup-desc">You've earned the 'First Quiz' badge!</p>
            <button id="badge-popup-close" class="btn primary-btn">Continue</button>
        </div>
    </div>
    
    <div class="pomodoro-modal" id="pomodoroModal">
        <div class="pomodoro-box glassmorphism-card" id="pomodoroBox">
            
            <div id="pomodoro-settings-view">
                <div class="pomodoro-header">
                    <h3>Pomodoro Settings</h3>
                    <button class="close-pomodoro-btn" aria-label="Close Pomodoro">
                        <i class="fas fa-times"></i>
                    </button>
                </div>
                <div class="pomodoro-body">
                    <div class="settings-form">
                        <div class="form-group">
                            <label for="focus-duration">Focus Duration (min)</label>
                            <input type="number" id="focus-duration" value="25" min="1">
                        </div>
                        <div class="form-group">
                            <label for="short-break-duration">Short Break (min)</label>
                            <input type="number" id="short-break-duration" value="5" min="1">
                        </div>
                        <div class="form-group">
                            <label for="long-break-duration">Long Break (min)</label>
                            <input type="number" id="long-break-duration" value="30" min="1">
                        </div>
                        <div class="form-group">
                            <label for="sessions-before-long-break">Sessions until Long Break</label>
                            <input type="number" id="sessions-before-long-break" value="4" min="1">
                        </div>
                    </div>
                    <button class="btn primary-btn" id="start-pomodoro-btn">Start Timer</button>
                </div>
            </div>

            <div id="pomodoro-timer-view" style="display: none;">
                <div class="pomodoro-header">
                    <h3 id="timer-session-title">Focus</h3>
                    <button class="close-pomodoro-btn" aria-label="Close Pomodoro">
                        <i class="fas fa-times"></i>
                    </button>
                </div>
                <div class="pomodoro-body timer-active-body">
                    <div class="timer-display-container">
                        <svg class="progress-ring" width="220" height="220">
                           <circle class="progress-ring-bg" stroke-width="8" fill="transparent" r="100" cx="110" cy="110"/>
                           <circle class="progress-ring-fg" stroke-width="10" fill="transparent" r="100" cx="110" cy="110"/>
                        </svg>
                        <div class="time-display" id="time-display">25:00</div>
                    </div>
                    <div class="session-counter" id="session-counter">Session 1 of 4</div>
                    <div class="timer-controls">
                        <button id="pause-resume-btn" class="timer-control-btn"><i class="fas fa-play"></i></button>
                        <button id="reset-btn" class="timer-control-btn"><i class="fas fa-undo-alt"></i></button>
                        <button id="skip-btn" class="timer-control-btn"><i class="fas fa-forward"></i></button>
                    </div>
                </div>
            </div>

        </div>
    </div>
    <audio id="alarm-sound" src="https://www.soundjay.com/buttons/sounds/button-1.mp3" preload="auto"></audio>
    <script src="https://cdn.jsdelivr.net/npm/marked/marked.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/dompurify@2.4.1/dist/purify.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/tsparticles@2.9.3/tsparticles.bundle.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/pdf.js/2.11.338/pdf.min.js"></script>
    
    <script defer src="https://cdn.jsdelivr.net/npm/katex@0.16.9/dist/katex.min.js"></script>
    <script defer src="https://cdn.jsdelivr.net/npm/katex@0.16.9/dist/contrib/auto-render.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>

    <!-- كل السكريبتات الأخرى مثل jspdf, chart.js, etc. -->
    <script src="https://cdn.jsdelivr.net/npm/marked/marked.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/dompurify@2.4.1/dist/purify.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/tsparticles@2.9.3/tsparticles.bundle.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/pdf.js/2.11.338/pdf.min.js"></script>
    <script defer src="https://cdn.jsdelivr.net/npm/katex@0.16.9/dist/katex.min.js"></script>
    <script defer src="https://cdn.jsdelivr.net/npm/katex@0.16.9/dist/contrib/auto-render.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>

    <!-- ✅ --- التحميل الصحيح والنهائي لـ Markmap --- ✅ -->
    <!-- هذه السكريبتات يجب أن تكون قبل ملف script.js الخاص بك -->
    <div class="modal-overlay" id="report-modal">
    <div class="modal-box">
        <h3>Report Question</h3>
        <p>Please provide a brief explanation of the issue (e.g., incorrect answer, typo, unclear question).</p>
        <form id="report-form">
            <textarea id="report-reason" placeholder="Your reason..." required maxlength="500"></textarea>
            <div class="modal-actions">
                <button type="button" class="btn secondary-btn" id="cancel-report-btn">Cancel</button>
                <button type="submit" class="btn primary-btn">Submit Report</button>
            </div>
        </form>
    </div>
</div>

<!-- ملفك الرئيسي سيقوم بتحميل Markmap عند الحاجة -->
    <script src="script.js"></script>
</body>
</html>
